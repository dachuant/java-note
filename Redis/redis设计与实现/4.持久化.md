# 1 RDB持久化

> RDB将redis在内存中的数据库状态保存到磁盘中，生成的RDB文件是一个经过压缩的二进制文件，通过该文件可以还原生成RDB文件时数据库状态。



## 1.1 RDB文件的创建与载入

​	**SAVE**、**BGSAVE**命令可用于生成RDB文件。

- SAVE: 会阻塞Redis服务器进程，直到RDB文件创建完毕为止，在服务器进程阻塞期间，服务器不能处理任何命令请求。

- BGSAVE: fork出子进程，由子进程创建RDB文件，Redis服务器此时仍然可以继续处理用户请求。

  > BGSAVE执行期间，客户端发送的SAVE命令会被服务器拒绝，服务器禁止SAVE和BGSAVE同时进行，是为了避免父进程和子进程同时执行，产生竞争。
  >
  > BGREWRITEAOF和BGSAVE不能同时执行，基于性能方面的考虑，如果同时进行，这两个子进程会有大量的磁盘写入操作，造成性能问题。

服务器载入RDB文件时，会一直处于阻塞状态，直到载入工作完成。

